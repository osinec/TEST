<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>–†–µ—Ü–µ–ø—Ç—ã –ø–æ –∏–º–µ—é—â–∏–º—Å—è –ø—Ä–æ–¥—É–∫—Ç–∞–º</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: linear-gradient(135deg, #ffecd2, #fcb69f);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      color: #222;
      padding: 30px 16px;
    }
    .card {
      width: 100%;
      max-width: 540px;
      background: rgba(255,255,255,.96);
      border-radius: 26px;
      padding: 32px 28px;
      box-shadow: 0 30px 70px rgba(0,0,0,.18);
    }
    h1 {
      font-size: 26px;
      font-weight: 700;
      text-align: center;
      margin: 0 0 28px;
      line-height: 1.3;
      color: #d35400;
    }
    .ingredients-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(148px, 1fr));
      gap: 10px 12px;
      margin-bottom: 20px;
    }
    .ingredient-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      background: #fdfaf7;
      border: 1px solid #f4d3b5;
      border-radius: 14px;
      cursor: pointer;
      transition: all 0.22s;
    }
    .ingredient-item:has(input:checked) {
      background: #fff8f2;
      border-color: #f4a261;
      transform: translateY(-1px);
    }
    .ingredient-item input {
      width: 18px;
      height: 18px;
      accent-color: #f4a261;
    }
    .main-btn {
      padding: 18px 32px;
      background: linear-gradient(135deg, #f6d365, #fda085);
      font-size: 17px;
      color: #222;
      width: 100%;
      margin: 16px 0 12px;
      border: none;
      border-radius: 40px;
      font-weight: 700;
      cursor: pointer;
    }
    .main-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    
    .back-btn {
      padding: 14px 24px;
      background: linear-gradient(135deg, #a0d8ef, #b8e0f8);
      color: #222;
      font-size: 16px;
      width: 100%;
      margin-bottom: 16px;
      border: none;
      border-radius: 40px;
      cursor: pointer;
      /* –°–¥–µ–ª–∞–ª —Ç–µ–∫—Å—Ç –∂–∏—Ä–Ω—ã–º –ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É */
      font-weight: 800; 
    }

    .refresh-btn {
      padding: 16px;
      background: linear-gradient(135deg, #4caf50, #66bb6a);
      color: white;
      width: 100%;
      border-radius: 40px;
      border: none;
      font-weight: 700;
      cursor: pointer;
      display: none;
      margin-bottom: 10px;
    }

    /* –°—Ç–∏–ª–∏ –∑–Ω–∞—á–∫–æ–≤ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤ */
    .ing-tag { padding: 4px 8px; border-radius: 6px; font-size: 12px; display: inline-block; margin: 2px; }
    .have { background: #e3fcef; color: #27ae60; font-weight: 600; }
    .missing-main { background: #ffe3e3; color: #eb4d4b; border: 1px solid #ffcccc; }
    .missing-extra { background: #f1f2f6; color: #b2bec3; text-decoration: line-through; }

    .recipe-card {
      background: #fffef9;
      border-radius: 16px;
      padding: 20px;
      margin-top: 24px;
      border: 1px solid #f0e8e0;
    }
  </style>
</head>
<body>

<div class="card">
  <button class="back-btn" onclick="window.history.back()"><strong>‚Üê –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</strong></button>
  <h1>–ß—Ç–æ –µ—Å—Ç—å –¥–æ–º–∞?</h1>

  <div class="ingredients-grid" id="ingredientsList"></div>
  
  <button class="main-btn" id="findRecipesBtn" disabled>–ù–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Ä–µ—Ü–µ–ø—Ç—ã</button>
  <button class="refresh-btn" id="refreshBtn">–ü–æ–∫–∞–∑–∞—Ç—å –¥—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç</button>

  <div id="results"></div>
</div>

<script>
// –î–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å –≤—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä—è–º–æ –≤ —Å–∫—Ä–∏–ø—Ç, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–ª–∞ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞
const recipesData = [
  {
    "title": "–ì—Ä–∏–±–Ω–æ–π –æ–º–ª–µ—Ç",
    "time": "10",
    "calories": "250",
    "ingredients": [
      { "id": "mushrooms", "name": "—à–∞–º–ø–∏–Ω—å–æ–Ω—ã", "isMain": true },
      { "id": "eggs", "name": "2 —è–π—Ü–∞", "isMain": true },
      { "id": "onion", "name": "–ª—É–∫", "isMain": true },
      { "id": "salt", "name": "—Å–æ–ª—å", "isMain": false }
    ],
    "steps": ["–ì—Ä–∏–±—ã —Ä–µ–∂–µ–º...", "–û–±–∂–∞—Ä–∏–≤–∞–µ–º...", "–Ø–π—Ü–∞ –≤–∑–±–∏–≤–∞–µ–º..."]
  },
  {
    "title": "–õ–∞–≤–∞—à —Å —Ç–≤–æ—Ä–æ–≥–æ–º",
    "time": "20",
    "calories": "260",
    "ingredients": [
      { "id": "lavash", "name": "–ª–∞–≤–∞—à", "isMain": true },
      { "id": "cottage_cheese", "name": "—Ç–≤–æ—Ä–æ–≥", "isMain": true },
      { "id": "cheese", "name": "—Å—ã—Ä", "isMain": true },
      { "id": "eggs", "name": "—è–π—Ü–æ", "isMain": true }
    ],
    "steps": ["–°–º–µ—à–∞–π—Ç–µ —Ç–≤–æ—Ä–æ–≥...", "–ó–∞–≤–µ—Ä–Ω–∏—Ç–µ –≤ –ª–∞–≤–∞—à...", "–ó–∞–ø–µ–∫–∞–π—Ç–µ..."]
  }
];

const POPULAR_INGREDIENTS = [
  {id: "eggs", name: "–Ø–π—Ü–∞"}, {id: "mushrooms", name: "–ì—Ä–∏–±—ã"},
  {id: "cheese", name: "–°—ã—Ä"}, {id: "lavash", name: "–õ–∞–≤–∞—à"},
  {id: "cottage_cheese", name: "–¢–≤–æ—Ä–æ–≥"}, {id: "onion", name: "–õ—É–∫"}
];

let selected = new Set();
let matchingRecipes = [];
let currentIndex = 0;

const listEl = document.getElementById('ingredientsList');
const findBtn = document.getElementById('findRecipesBtn');
const refreshBtn = document.getElementById('refreshBtn');
const resultsEl = document.getElementById('results');

function init() {
  listEl.innerHTML = POPULAR_INGREDIENTS.map(ing => `
    <label class="ingredient-item">
      <input type="checkbox" value="${ing.id}" onchange="toggle('${ing.id}')">
      <span>${ing.name}</span>
    </label>
  `).join('');
}

function toggle(id) {
  if (selected.has(id)) selected.delete(id);
  else selected.add(id);
  findBtn.disabled = selected.size === 0;
  refreshBtn.style.display = 'none';
}

function renderRecipe(recipe) {
  const ingHTML = recipe.ingredients.map(ing => {
    const has = selected.has(ing.id);
    const cls = has ? 'have' : (ing.isMain ? 'missing-main' : 'missing-extra');
    const label = has ? ing.name : (ing.isMain ? ing.name + " (–∑–∞–º–µ–Ω–∏—Ç—å!)" : ing.name);
    return `<span class="ing-tag ${cls}">${label}</span>`;
  }).join('');

  resultsEl.innerHTML = `
    <div class="recipe-card">
      <h2 style="color: #d35400; margin-bottom:10px;">${recipe.title}</h2>
      <p style="font-size:14px; color:#666; margin-bottom:15px;">‚è± ${recipe.time} –º–∏–Ω | üî• ${recipe.calories} –∫–∫–∞–ª</p>
      <div>${ingHTML}</div>
      <div style="margin-top:15px; font-size:15px; line-height:1.5;">
        <strong>–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ:</strong><br>${recipe.steps.join('<br>')}
      </div>
    </div>
  `;
}

findBtn.onclick = () => {
  // –ê–ª–≥–æ—Ä–∏—Ç–º 80% —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤
  matchingRecipes = recipesData.filter(recipe => {
    const mains = recipe.ingredients.filter(i => i.isMain);
    const count = mains.filter(i => selected.has(i.id)).length;
    return (count / mains.length) >= 0.8;
  }).sort(() => Math.random() - 0.5);

  if (matchingRecipes.length > 0) {
    currentIndex = 0;
    renderRecipe(matchingRecipes[currentIndex]);
    if (matchingRecipes.length > 1) refreshBtn.style.display = 'block';
  } else {
    resultsEl.innerHTML = '<p style="text-align:center; padding:20px;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞—à–ª–æ—Å—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–±—Ä–∞—Ç—å –±–æ–ª—å—à–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤!</p>';
  }
};

refreshBtn.onclick = () => {
  currentIndex = (currentIndex + 1) % matchingRecipes.length;
  renderRecipe(matchingRecipes[currentIndex]);
};

init();
</script>
</body>
</html>
